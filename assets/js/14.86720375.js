(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{410:function(t,s,a){"use strict";a.r(s);var e=a(54),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"первые-шаги"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#первые-шаги"}},[t._v("#")]),t._v(" Первые шаги")]),t._v(" "),a("p",[t._v("В этой серии статей вы узнаете "),a("strong",[t._v("основные принципы")]),t._v(" работы Nest. Чтобы ознакомиться\nс основами приложений Nest - мы построим базовое CRUD-приложение\nс функциями, которые охватывают большое количество возможностей на начальном уровне.")]),t._v(" "),a("h2",{attrs:{id:"язык"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#язык"}},[t._v("#")]),t._v(" Язык")]),t._v(" "),a("p",[t._v("Мы влюблены в "),a("a",{attrs:{href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript"),a("OutboundLink")],1),t._v(", но прежде всего\nмы любим "),a("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),a("OutboundLink")],1),t._v(". Поэтому Nest совместим как с TypeScript,\nтак и с "),a("strong",[t._v("чистым JavaScript")]),t._v(". Nest использует последние возможности языка, поэтому для\nего использования с ванильным JavaScript нам нужен компилятор "),a("a",{attrs:{href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Babel"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("В примерах мы будем использовать в основном TypeScript, и вам советуем делать так же.\n(прим. переводчика - Использовать Nest без Typescript неразумно - фреймворк создан именно с прицелом на TS).")]),t._v(" "),a("h2",{attrs:{id:"предварительные-условия"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#предварительные-условия"}},[t._v("#")]),t._v(" Предварительные условия")]),t._v(" "),a("p",[t._v("Пожалуйста, убедитесь, что "),a("a",{attrs:{href:"https://nodejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),a("OutboundLink")],1),t._v(" (>= 10.13.0, кроме v13)\nустановлена на вашей операционной системе.")]),t._v(" "),a("h2",{attrs:{id:"установка"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#установка"}},[t._v("#")]),t._v(" Установка")]),t._v(" "),a("p",[t._v("Настроить новый проект довольно просто с помощью "),a("a",{attrs:{href:"/cli/overview"}},[t._v("Nest CLI")]),t._v(".\nЕсли установлен "),a("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm"),a("OutboundLink")],1),t._v(", вы можете создать новый проект Nest\nс помощью следующих команд в терминале вашей ОС:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g @nestjs/cli\n$ nest new project-name\n")])])]),a("p",[t._v("Будет создан каталог "),a("code",[t._v("project-name")]),t._v(", установлены модули node и несколько других шаблонных файлов,\nа также создан каталог "),a("code",[t._v("src/")]),t._v(", который будет заполнен несколькими основными файлами.")]),t._v(" "),a("div",{staticClass:"file-tree"},[a("div",{staticClass:"item"},[t._v("src")]),t._v(" "),a("div",{staticClass:"children"},[a("div",{staticClass:"item"},[t._v("app.controller.spec.ts")]),t._v(" "),a("div",{staticClass:"item"},[t._v("app.controller.ts")]),t._v(" "),a("div",{staticClass:"item"},[t._v("app.module.ts")]),t._v(" "),a("div",{staticClass:"item"},[t._v("app.service.ts")]),t._v(" "),a("div",{staticClass:"item"},[t._v("main.ts")])])]),t._v(" "),a("p",[t._v("Вот краткий обзор этих основных файлов:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("app.controller.ts")])]),t._v(" "),a("td",[t._v("Базовый контроллер с одним маршрутом.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("app.controller.spec.ts")])]),t._v(" "),a("td",[t._v("Юнит-тесты для контроллера.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("app.module.ts")])]),t._v(" "),a("td",[t._v("Корневой модуль приложения.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("app.service.ts")])]),t._v(" "),a("td",[t._v("Базовый сервис с единственным методом.")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("main.ts")])]),t._v(" "),a("td",[t._v("Входной файл приложения, который использует функцию "),a("code",[t._v("NestFactory")]),t._v(" для создания экземпляра приложения Nest.")])])])]),t._v(" "),a("p",[t._v("В "),a("code",[t._v("main.ts")]),t._v(" включена асинхронная функция, которая будет "),a("strong",[t._v("инициализировать")]),t._v(" наше приложение:")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" NestFactory "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AppModule "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app.module'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bootstrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" NestFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AppModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bootstrap")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Для создания экземпляра приложения Nest мы используем основной класс "),a("code",[t._v("NestFactory")]),t._v(".\n"),a("code",[t._v("NestFactory")]),t._v(" позволяет создать экземпляр приложения.\nМетод "),a("code",[t._v("create()")]),t._v(" возвращает объект приложения, который соответствует интерфейсу\n"),a("code",[t._v("INestApplication")]),t._v(". Этот объект предоставляет набор методов, которые будут описаны в последующих\nглавах. В приведенном выше примере "),a("code",[t._v("main.ts")]),t._v(" мы просто запускаем HTTP-сервер, который позволяет\nприложению обрабатывать входящие HTTP-запросов.")]),t._v(" "),a("p",[t._v("Обратите внимание, что проект, созданный с помощью Nest CLI, создает начальную структуру проекта,\nкоторая поощряет разработчиков следовать соглашению о хранении каждого модуля в отдельном каталоге.")]),t._v(" "),a("h2",{attrs:{id:"платформа"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#платформа"}},[t._v("#")]),t._v(" Платформа")]),t._v(" "),a("p",[t._v("Nest стремится быть платформонезависимым фреймворком. Независимость от платформы позволяет\nсоздавать переиспользуемые логические части, которые разработчики могут использовать\nв различных частях приложения. Технически, Nest может работать с любым\nNode HTTP фреймворком после создания адаптера. Из коробки поддерживаются два фреймворка\nHTTP: "),a("a",{attrs:{href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("express"),a("OutboundLink")],1),t._v(" и "),a("a",{attrs:{href:"https://www.fastify.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("fastify"),a("OutboundLink")],1),t._v(". Вы можете выбрать\nтот, который лучше всего подходит для ваших нужд.")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th")])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("platform-express")])]),t._v(" "),a("td",[a("a",{attrs:{href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Express"),a("OutboundLink")],1),t._v(" - известный минималистский веб-фреймворк для node. Это проверенная в боях, готовая к продакшену библиотека с большим количеством решений, реализованных сообществом. По умолчанию используется пакет "),a("code",[t._v("@nestjs/platform-express")]),t._v(".")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("platform-fastify")])]),t._v(" "),a("td",[a("a",{attrs:{href:"https://www.fastify.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fastify"),a("OutboundLink")],1),t._v(" - это высокопроизводительный фреймворк, ориентированный на обеспечение максимальной эффективности и скорости. Читайте, как его использовать "),a("a",{attrs:{href:"/techniques/performance"}},[t._v("здесь")]),t._v(".")])])])]),t._v(" "),a("p",[t._v("Какая бы платформа ни использовалась, она предоставляет свой собственный интерфейс приложения.\nОни выглядят соответственно как "),a("code",[t._v("NestExpressApplication")]),t._v(" и "),a("code",[t._v("NestFastifyApplication")]),t._v(".")]),t._v(" "),a("p",[t._v("Когда вы передаете тип в метод "),a("code",[t._v("NestFactory.create()")]),t._v(", как в примере ниже, объект "),a("code",[t._v("app")]),t._v("\nбудет иметь методы, доступные исключительно для этой конкретной платформы. Однако обратите внимание,\nчто вам не "),a("strong",[t._v("нужно")]),t._v(" указывать тип "),a("strong",[t._v("если")]),t._v(" вы не хотите получить доступ к API базовой платформы.")]),t._v(" "),a("div",{staticClass:"language-typescript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-typescript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" NestFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token generic-function"}},[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token generic class-name"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("NestExpressApplication"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AppModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"запуск-приложения"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#запуск-приложения"}},[t._v("#")]),t._v(" Запуск приложения")]),t._v(" "),a("p",[t._v("После завершения процесса установки вы можете выполнить следующую команду в командной строке\nвашей ОС, чтобы запустить приложение, принимающее входящие HTTP-запросы:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run start\n")])])]),a("p",[t._v("Эта команда запустит приложение с HTTP-сервером, слушающим порт, определенный в\nфайле "),a("code",[t._v("src/main.ts")]),t._v(". После запуска приложения откройте браузер и перейдите по адресу\n"),a("code",[t._v("http://localhost:3000/")]),t._v(". Вы должны увидеть сообщение "),a("code",[t._v("Hello World!")]),t._v(".")])])}),[],!1,null,null,null);s.default=r.exports}}]);