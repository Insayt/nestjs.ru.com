<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | NestJS</title>
    <meta name="generator" content="VuePress 1.9.1">
    <script>(function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(87021734, "init", {
        clickmap:false,
        trackLinks:false,
        accurateTrackBounce:true
   });</script>
    <meta name="description" content="Nest js —Ä—É—Å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | Nest js –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.4b8ff7ad.css" as="style"><link rel="preload" href="/assets/js/app.1bd63846.js" as="script"><link rel="preload" href="/assets/js/2.5070ee21.js" as="script"><link rel="preload" href="/assets/js/25.c3f9362d.js" as="script"><link rel="preload" href="/assets/js/6.167fb38f.js" as="script"><link rel="prefetch" href="/assets/js/10.b20719ca.js"><link rel="prefetch" href="/assets/js/11.bbfbc3ea.js"><link rel="prefetch" href="/assets/js/12.a2d55baa.js"><link rel="prefetch" href="/assets/js/13.c92fe6ba.js"><link rel="prefetch" href="/assets/js/14.3e79b7c3.js"><link rel="prefetch" href="/assets/js/15.da725b6a.js"><link rel="prefetch" href="/assets/js/16.d43e2107.js"><link rel="prefetch" href="/assets/js/17.f1a75656.js"><link rel="prefetch" href="/assets/js/18.1a4b180e.js"><link rel="prefetch" href="/assets/js/19.9eb91626.js"><link rel="prefetch" href="/assets/js/20.76f39c77.js"><link rel="prefetch" href="/assets/js/21.85191f7a.js"><link rel="prefetch" href="/assets/js/22.fc98ed4f.js"><link rel="prefetch" href="/assets/js/23.443f201b.js"><link rel="prefetch" href="/assets/js/24.be7646be.js"><link rel="prefetch" href="/assets/js/26.5ff90b47.js"><link rel="prefetch" href="/assets/js/27.6bbcab17.js"><link rel="prefetch" href="/assets/js/28.5c9c2761.js"><link rel="prefetch" href="/assets/js/29.46dc47d1.js"><link rel="prefetch" href="/assets/js/3.be24f3d0.js"><link rel="prefetch" href="/assets/js/30.d3d5eb27.js"><link rel="prefetch" href="/assets/js/31.1f975862.js"><link rel="prefetch" href="/assets/js/32.2d3ac26a.js"><link rel="prefetch" href="/assets/js/33.704f3efd.js"><link rel="prefetch" href="/assets/js/34.011e775a.js"><link rel="prefetch" href="/assets/js/35.3e02445a.js"><link rel="prefetch" href="/assets/js/36.3954da87.js"><link rel="prefetch" href="/assets/js/4.9ac86334.js"><link rel="prefetch" href="/assets/js/5.e3f29155.js"><link rel="prefetch" href="/assets/js/7.1222a4fa.js"><link rel="prefetch" href="/assets/js/8.7922d1bc.js"><link rel="prefetch" href="/assets/js/9.398b84e3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4b8ff7ad.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="NestJS" class="logo"> <span class="site-name can-hide">NestJS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://donatty.com/insayt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  –ö—É–ø–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫—É –ø–∏–≤–∫–∞ üç∫
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/Insayt/nestjs.ru.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://donatty.com/insayt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  –ö—É–ø–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫—É –ø–∏–≤–∫–∞ üç∫
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/Insayt/nestjs.ru.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/guide/introduction.html" class="sidebar-link">–í–≤–µ–¥–µ–Ω–∏–µ</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>–û–±–∑–æ—Ä</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/first-steps.html" class="sidebar-link">–ü–µ—Ä–≤—ã–µ —à–∞–≥–∏</a></li><li><a href="/guide/controllers.html" class="sidebar-link">–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã</a></li><li><a href="/guide/providers.html" class="sidebar-link">–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã</a></li><li><a href="/guide/modules.html" class="sidebar-link">–ú–æ–¥—É–ª–∏</a></li><li><a href="/guide/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/guide/exception-filters.html" class="sidebar-link">–§–∏–ª—å—Ç—Ä—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π</a></li><li><a href="/guide/pipes.html" class="sidebar-link">Pipes</a></li><li><a href="/guide/guards.html" class="sidebar-link">Guards</a></li><li><a href="/guide/interceptors.html" class="sidebar-link">Interceptors</a></li><li><a href="/guide/custom-decorators.html" class="sidebar-link">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>–û—Å–Ω–æ–≤—ã</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/fundamentals/custom-providers.html" class="sidebar-link">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã</a></li><li><a href="/guide/fundamentals/async-providers.html" class="sidebar-link">–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã</a></li><li><a href="/guide/fundamentals/dynamic-modules.html" class="sidebar-link">–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏</a></li><li><a href="/guide/fundamentals/injection-scopes.html" class="sidebar-link">–û–±–ª–∞—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–Ω—ä–µ–∫—Ü–∏–π</a></li><li><a href="/guide/fundamentals/circular-dependency.html" class="sidebar-link">–ö—Ä—É–≥–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å</a></li><li><a href="/guide/fundamentals/module-ref.html" class="sidebar-link">–°—Å—ã–ª–∫–∞ –Ω–∞ –º–æ–¥—É–ª—å</a></li><li><a href="/guide/fundamentals/lazy-loading-modules.html" class="sidebar-link">–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π</a></li><li><a href="/guide/fundamentals/execution-context.html" class="sidebar-link">–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</a></li><li><a href="/guide/fundamentals/lifecycle-events.html" class="sidebar-link">–°–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞</a></li><li><a href="/guide/fundamentals/platform-agnosticism.html" class="sidebar-link">–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</a></li><li><a href="/guide/fundamentals/unit-testing.html" aria-current="page" class="active sidebar-link">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>–¢–µ—Ö–Ω–∏–∫–∏</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/techniques/database.html" class="sidebar-link">–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</a></li><li><a href="/guide/techniques/mongodb.html" class="sidebar-link">–ú–æ–Ω–≥–æ</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"><a href="#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" class="header-anchor">#</a> –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h1> <p>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–æ–π —á–∞—Å—Ç—å—é –ª—é–±–æ–π —Å–µ—Ä—å–µ–∑–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
–ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∏ –±—ã—Å—Ç—Ä–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏–ª–∏ –Ω–∞–±–æ—Ä—ã —Ç–µ—Å—Ç–æ–≤ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
—Ä–µ–ª–∏–∑–æ–≤ —Ü–µ–ª—è–º –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ–º–æ–≥–∞–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –æ—Ö–≤–∞—Ç –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞—Ç–Ω–æ–π
—Å–≤—è–∑–∏ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ–≤—ã—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—Ä—É–¥–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç—Ç–∞–ø–∞—Ö –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –∏ –≤—ã–ø—É—Å–∫ –≤–µ—Ä—Å–∏–∏.</p> <p>–¢–∞–∫–∏–µ —Ç–µ—Å—Ç—ã —á–∞—Å—Ç–æ –±—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤, –≤–∫–ª—é—á–∞—è –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã, —Å–∫–≤–æ–∑–Ω—ã–µ (e2e) —Ç–µ—Å—Ç—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–µ–æ—Å–ø–æ—Ä–∏–º—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞, –∏—Ö —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω–æ–π. Nest —Å—Ç—Ä–µ–º–∏—Ç—Å—è –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å –ø–µ—Ä–µ–¥–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≤–∫–ª—é—á–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É –æ–Ω –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å
—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∏ –∫–æ–º–∞–Ω–¥–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç—ã. Nest:</p> <ul><li>–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ e2e-—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π</li> <li>–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å/–∑–∞–≥—Ä—É–∑—á–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)</li> <li>–æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å <a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer">Jest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> –∏ <a href="https://github.com/visionmedia/supertest" target="_blank" rel="noopener noreferrer">Supertest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
&quot;–∏–∑ –∫–æ—Ä–æ–±–∫–∏&quot;, –æ—Å—Ç–∞–≤–∞—è—Å—å –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º –æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</li> <li>–¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Nest –¥–æ—Å—Ç—É–ø–Ω–æ–π –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –º–æ–∫–∏–Ω–≥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.</li></ul> <p>–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π <strong>—Ç–µ—Å—Ç–æ–≤—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫</strong>, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É Nest –Ω–µ –Ω–∞–≤—è–∑—ã–≤–∞–µ—Ç
–Ω–∏–∫–∞–∫–∏—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ü—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, test runner), –∏ –≤—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É
–±—É–¥–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏ –≥–æ—Ç–æ–≤—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Nest.</p> <h2 id="—É—Å—Ç–∞–Ω–æ–≤–∫–∞"><a href="#—É—Å—Ç–∞–Ω–æ–≤–∫–∞" class="header-anchor">#</a> –£—Å—Ç–∞–Ω–æ–≤–∫–∞</h2> <p>–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É, —Å–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –ø–∞–∫–µ—Ç:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> i --save-dev @nestjs/testing
</code></pre></div><h2 id="—é–Ω–∏—Ç-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"><a href="#—é–Ω–∏—Ç-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" class="header-anchor">#</a> –Æ–Ω–∏—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2> <p>–í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã —Ç–µ—Å—Ç–∏—Ä—É–µ–º –¥–≤–∞ –∫–ª–∞—Å—Å–∞: <code>CatsController</code> –∏ <code>CatsService</code>. –ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å,
<a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer">Jest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –û–Ω —Å–ª—É–∂–∏—Ç
–¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ assert –∏ —É—Ç–∏–ª–∏—Ç—ã test-double, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥–∞—é—Ç –≤ –º–æ–∫–∏–Ω–≥–µ, —à–ø–∏–æ–Ω–∞–∂–µ(spying) –∏ —Ç.–¥.
–í —Å–ª–µ–¥—É—é—â–µ–º –±–∞–∑–æ–≤–æ–º —Ç–µ—Å—Ç–µ –º—ã –≤—Ä—É—á–Ω—É—é –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä—É–µ–º —ç—Ç–∏ –∫–ª–∞—Å—Å—ã –∏ —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏ —Å–µ—Ä–≤–∏—Å –≤—ã–ø–æ–ª–Ω—è—é—Ç —Å–≤–æ–π API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç.</p> <div class="filename">cats.controller.spec.ts</div> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> CatsController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./cats.controller'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CatsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./cats.service'</span><span class="token punctuation">;</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'CatsController'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> catsController<span class="token operator">:</span> CatsController<span class="token punctuation">;</span>
  <span class="token keyword">let</span> catsService<span class="token operator">:</span> CatsService<span class="token punctuation">;</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    catsService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CatsService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    catsController <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CatsController</span><span class="token punctuation">(</span>catsService<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'findAll'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return an array of cats'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>catsService<span class="token punctuation">,</span> <span class="token string">'findAll'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> catsController<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>–•—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤ —Ä—è–¥–æ–º —Å —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏. –§–∞–π–ª—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å <code>.spec</code> –∏–ª–∏ <code>.test</code>.</p></blockquote> <p>–ü–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –≤—ã—à–µ –ø—Ä–∏–º–µ—Ä —Ç—Ä–∏–≤–∏–∞–ª–µ–Ω, –º—ã –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∏—á–µ–≥–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –¥–ª—è Nest. –ë–æ–ª–µ–µ —Ç–æ–≥–æ,
–º—ã –¥–∞–∂–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–Ω—ä–µ–∫—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä <code>CatsService</code> –Ω–∞—à–µ–º—É <code>catsController</code>).
–¢–∞–∫–∞—è —Ñ–æ—Ä–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - –∫–æ–≥–¥–∞ –º—ã –≤—Ä—É—á–Ω—É—é –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä—É–µ–º —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –∫–ª–∞—Å—Å—ã - —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è <strong>–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º</strong>,
–ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–æ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞. –î–∞–≤–∞–π—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç
–≤–∞–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Nest.</p> <h2 id="—É—Ç–∏–ª–∏—Ç—ã-–¥–ª—è-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"><a href="#—É—Ç–∏–ª–∏—Ç—ã-–¥–ª—è-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è" class="header-anchor">#</a> –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2> <p>–ü–∞–∫–µ—Ç <code>@nestjs/testing</code> –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä —É—Ç–∏–ª–∏—Ç, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –î–∞–≤–∞–π—Ç–µ
–ø–µ—Ä–µ–ø–∏—à–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å <code>Test</code>:</p> <div class="filename">cats.controller.spec.ts</div> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/testing'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CatsController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./cats.controller'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CatsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./cats.service'</span><span class="token punctuation">;</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'CatsController'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> catsController<span class="token operator">:</span> CatsController<span class="token punctuation">;</span>
  <span class="token keyword">let</span> catsService<span class="token operator">:</span> CatsService<span class="token punctuation">;</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> moduleRef <span class="token operator">=</span> <span class="token keyword">await</span> Test<span class="token punctuation">.</span><span class="token function">createTestingModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        controllers<span class="token operator">:</span> <span class="token punctuation">[</span>CatsController<span class="token punctuation">]</span><span class="token punctuation">,</span>
        providers<span class="token operator">:</span> <span class="token punctuation">[</span>CatsService<span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    catsService <span class="token operator">=</span> moduleRef<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>CatsService<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>CatsService<span class="token punctuation">)</span><span class="token punctuation">;</span>
    catsController <span class="token operator">=</span> moduleRef<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span>CatsController<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>CatsController<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'findAll'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should return an array of cats'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>catsService<span class="token punctuation">,</span> <span class="token string">'findAll'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> catsController<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–ö–ª–∞—Å—Å <code>Test</code> –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ —Å—É—Ç–∏ –∏–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–∞–Ω—Ç–∞–π–º Nest,
–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∞–º —Ö—É–∫–∏, –æ–±–ª–µ–≥—á–∞—é—â–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –∫–ª–∞—Å—Å–∞, –≤–∫–ª—é—á–∞—è –º–æ–∫–∏–Ω–≥ –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ. –ö–ª–∞—Å—Å <code>Test</code>
–∏–º–µ–µ—Ç –º–µ—Ç–æ–¥ <code>createTestingModule()</code>, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –æ–±—ä–µ–∫—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –º–æ–¥—É–ª—è (—Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π
–≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—É <code>@Module()</code>). –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä <code>TestingModule</code>, –∫–æ—Ç–æ—Ä—ã–π, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç
–Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤. –î–ª—è –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –≤–∞–∂–Ω—ã–º —è–≤–ª—è–µ—Ç—Å—è –º–µ—Ç–æ–¥ <code>compile()</code>. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥—É–ª—å —Å –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
(–ø–æ–¥–æ–±–Ω–æ —Ç–æ–º—É, –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –æ–±—ã—á–Ω–æ–º —Ñ–∞–π–ª–µ <code>main.ts</code> —Å –ø–æ–º–æ—â—å—é <code>NestFactory.create()</code>), –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–¥—É–ª—å,
–≥–æ—Ç–æ–≤—ã–π –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.</p> <blockquote><p>–ú–µ—Ç–æ–¥ <code>compile()</code> —è–≤–ª—è–µ—Ç—Å—è <strong>–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º</strong> –∏ –ø–æ—ç—Ç–æ–º—É –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–∂–∏–¥–∞–µ–º—ã–º (await). –ü–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
–º–æ–¥—É–ª—è –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –ª—é–±–æ–π <strong>—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π</strong> —ç–∫–∑–µ–º–ø–ª—è—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤ –Ω–µ–º –æ–±—ä—è–≤–ª–µ–Ω (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã), –∏—Å–ø–æ–ª—å–∑—É—è
–º–µ—Ç–æ–¥ <code>get()</code>.</p></blockquote> <p><code>TestingModule</code> –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç –∫–ª–∞—Å—Å–∞ <a href="/guide/fundamentals/module-ref">module reference</a>, –∏ –ø–æ—ç—Ç–æ–º—É —Å–ø–æ—Å–æ–±–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
—Ä–µ–∑–æ–ª–≤–∏—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (transient –∏–ª–∏ request-scoped). –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ <code>resolve()</code> (–º–µ—Ç–æ–¥ <code>get()</code>
–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã).</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> moduleRef <span class="token operator">=</span> <span class="token keyword">await</span> Test<span class="token punctuation">.</span><span class="token function">createTestingModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  controllers<span class="token operator">:</span> <span class="token punctuation">[</span>CatsController<span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span>CatsService<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
catsService <span class="token operator">=</span> <span class="token keyword">await</span> moduleRef<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>CatsService<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>–ú–µ—Ç–æ–¥ <code>resolve()</code> –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏–∑ –µ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–¥–¥–µ—Ä–µ–≤–∞ <strong>DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</strong>. –ö–∞–∂–¥–æ–µ
–ø–æ–¥–¥–µ—Ä–µ–≤–æ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ –≤—ã –≤—ã–∑–æ–≤–µ—Ç–µ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ
—Å—Å—ã–ª–∫–∏ –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã, –≤—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –æ–Ω–∏ –Ω–µ —Ä–∞–≤–Ω—ã.</p></blockquote> <blockquote><p>–£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ –º–æ–¥—É–ª—å <a href="/guide/fundamentals/module-ref">–∑–¥–µ—Å—å</a>.</p></blockquote> <p>–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å–∏—é –ª—é–±–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –µ–≥–æ —Å –ø–æ–º–æ—â—å—é
<a href="/guide/fundamentals/custom-providers">–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞</a> –¥–ª—è —Ü–µ–ª–µ–π —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å
—Å–ª—É–∂–±—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤ —Å–ª–µ–¥—É—é—â–µ–º
—Ä–∞–∑–¥–µ–ª–µ, –Ω–æ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –¥–ª—è –º–æ–¥—É–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤.</p> <div class="donut"><div class="donut__content"><div class="donut__title">
      –ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ <br>
      –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫!
    </div> <p>
      –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–º–æ–≥–ª–∞ –≤–∞–º –∏ –æ–∫–∞–∑–∞–ª–∞—Å—å –ø–æ–ª–µ–∑–Ω–∞ - –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å
      –∞–≤—Ç–æ—Ä–∞, —É–≥–æ—Å—Ç–∏–≤ –µ–≥–æ –ø–∞—Ä–æ–π –±–æ–∫–∞–ª–æ–≤ –ø–∏–≤–∫–∞ üç∫ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å
      <a href="https://donatty.com/insayt" target="_blank"> donatty.</a> <br>
      –õ–∏–±–æ –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ –ø–µ—Ä–µ–≤–æ–¥ –ø—É–ª —Ä–µ–∫–≤–µ—Å—Ç–æ–º –Ω–∞
      <a href="https://github.com/Insayt/nestjs.ru.com" target="_blank">
        –≥–∏—Ç—Ö–∞–±–µ
      </a></p></div> <img src="/donut.png" class="donut__img"></div> <h2 id="–∞–≤—Ç–æ-–º–æ–∫–∏–Ω–≥"><a href="#–∞–≤—Ç–æ-–º–æ–∫–∏–Ω–≥" class="header-anchor">#</a> –ê–≤—Ç–æ –º–æ–∫–∏–Ω–≥</h2> <p>Nest —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–∞–±—Ä–∏–∫—É –º–æ–∫–æ–≤ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ –≤—Å–µ–º –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ
–≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –≤ –∫–ª–∞—Å—Å–µ –∏–º–µ–µ—Ç—Å—è –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑ –Ω–∏—Ö –∑–∞–π–º–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
–ß—Ç–æ–±—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π, –º–µ—Ç–æ–¥ <code>createTestingModule()</code> –Ω—É–∂–Ω–æ —Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å –º–µ—Ç–æ–¥–æ–º <code>useMocker()</code>, –ø–µ—Ä–µ–¥–∞–≤ –µ–º—É —Ñ–∞–±—Ä–∏–∫—É
–¥–ª—è –º–æ–∫–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –≠—Ç–∞ —Ñ–∞–±—Ä–∏–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Ç–æ–∫–µ–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –ª—é–±–æ–π —Ç–æ–∫–µ–Ω,
–∫–æ—Ç–æ—Ä—ã–π –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ Nest, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –º–æ–∫–∞. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—â–µ–≥–æ –º–æ–∫–∞ —Å –ø–æ–º–æ—â—å—é
<a href="https://www.npmjs.com/package/jest-mock" target="_blank" rel="noopener noreferrer"><code>jest-mock</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–æ–∫–∞ –¥–ª—è <code>CatsService</code> —Å –ø–æ–º–æ—â—å—é <code>jest.fn()</code>.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> moduleMocker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModuleMocker</span><span class="token punctuation">(</span>global<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'CatsController'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> controller<span class="token operator">:</span> CatsController<span class="token punctuation">;</span>
  <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> moduleRef <span class="token operator">=</span> <span class="token keyword">await</span> Test<span class="token punctuation">.</span><span class="token function">createTestingModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      controllers<span class="token operator">:</span> <span class="token punctuation">[</span>CatsController<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">useMocker</span><span class="token punctuation">(</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">===</span> CatsService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> findAll<span class="token operator">:</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mockResolveValue</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> token <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> mockMetadata <span class="token operator">=</span> moduleMocker<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token keyword">as</span> MockFunctionMetadata<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token punctuation">,</span> <span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> Mock <span class="token operator">=</span> moduleMocker<span class="token punctuation">.</span><span class="token function">generateFromMetadata</span><span class="token punctuation">(</span>mockMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Mock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    controller <span class="token operator">=</span> moduleRef<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>CatsController<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –æ–±—â—É—é —Ñ–∞–±—Ä–∏–∫—É –º–æ–∫–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä <code>createMock</code> –∏–∑ <a href="https://github.com/golevelup/nestjs/tree/master/packages/testing" target="_blank" rel="noopener noreferrer"><code>@golevelup/ts-jest</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <p>–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å —ç—Ç–∏ –º–æ–∫–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–∞–∫ –≤—ã –æ–±—ã—á–Ω–æ –¥–µ–ª–∞–µ—Ç–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏,
<code>moduleRef.get(CatsService)</code>.</p> <h2 id="—Å–∫–≤–æ–∑–Ω–æ–µ-end-to-end-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"><a href="#—Å–∫–≤–æ–∑–Ω–æ–µ-end-to-end-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ" class="header-anchor">#</a> –°–∫–≤–æ–∑–Ω–æ–µ (End-to-end) —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2> <p>–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö –∏ –∫–ª–∞—Å—Å–∞—Ö, —Å–∫–≤–æ–∑–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (e2e)
–æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–ª–∞—Å—Å–æ–≤ –∏ –º–æ–¥—É–ª–µ–π –Ω–∞ –±–æ–ª–µ–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ - –±–ª–∏–∂–µ –∫ —Ç–æ–º—É, –∫–∞–∫ –∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç
–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π. –ü–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç—Ä—É–¥–Ω–æ –≤—Ä—É—á–Ω—É—é —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫–≤–æ–∑–Ω–æ–µ
–ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏ API. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–≤–æ–∑–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–º–æ–≥–∞—é—Ç –Ω–∞–º —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–±—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø—Ä–æ–µ–∫—Ç–∞. –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è e2e-—Ç–µ—Å—Ç–æ–≤ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é —Ç–æ–π,
–∫–æ—Ç–æ—Ä—É—é –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –≤ <strong>—é–Ω–∏—Ç-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</strong>. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, Nest –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
–±–∏–±–ª–∏–æ—Ç–µ–∫—É <a href="https://github.com/visionmedia/supertest" target="_blank" rel="noopener noreferrer">Supertest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.</p> <div class="filename">cats.e2e-spec.ts</div> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> request <span class="token keyword">from</span> <span class="token string">'supertest'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/testing'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CatsModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../src/cats/cats.module'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CatsService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../src/cats/cats.service'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> INestApplication <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nestjs/common'</span><span class="token punctuation">;</span>
<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Cats'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> app<span class="token operator">:</span> INestApplication<span class="token punctuation">;</span>
  <span class="token keyword">let</span> catsService <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">findAll</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> moduleRef <span class="token operator">=</span> <span class="token keyword">await</span> Test<span class="token punctuation">.</span><span class="token function">createTestingModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      imports<span class="token operator">:</span> <span class="token punctuation">[</span>CatsModule<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">overrideProvider</span><span class="token punctuation">(</span>CatsService<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">useValue</span><span class="token punctuation">(</span>catsService<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app <span class="token operator">=</span> moduleRef<span class="token punctuation">.</span><span class="token function">createNestApplication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/GET cats</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token function">getHttpServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/cats'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        data<span class="token operator">:</span> catsService<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">afterAll</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ <a href="/guide/techniques/performance">Fastify</a> –≤ –∫–∞—á–µ—Å—Ç–≤–µ HTTP-–∞–¥–∞–ø—Ç–µ—Ä–∞, –æ–Ω —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –¥—Ä—É–≥–æ–π
–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> app<span class="token operator">:</span> NestFastifyApplication<span class="token punctuation">;</span>

<span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  app <span class="token operator">=</span> moduleRef<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">createNestApplication</span><span class="token generic class-name"><span class="token operator">&lt;</span>NestFastifyApplication<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">FastifyAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">getHttpAdapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/GET cats</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> app
    <span class="token punctuation">.</span><span class="token function">inject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">'/cats'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token comment">/* expectedPayload */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token function">afterAll</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p>–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã —Ä–∞–∑–≤–∏–≤–∞–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ä–∞–Ω–µ–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π. –í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –º–µ—Ç–æ–¥—É <code>compile()</code>, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏
—Ä–∞–Ω–µ–µ, –º—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ <code>createNestApplication()</code> –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–Ω–æ–π —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Nest. –ú—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É
–Ω–∞ –∑–∞–ø—É—â–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –Ω–∞—à–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π <code>app</code>, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.</p> <p>–ú—ã –∏–º–∏—Ç–∏—Ä—É–µ–º HTTP-—Ç–µ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ <code>request()</code> –∏–∑ Supertest. –ú—ã —Ö–æ—Ç–∏–º, —á—Ç–æ–±—ã —ç—Ç–∏ HTTP-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –∫ –Ω–∞—à–µ–º—É
–∑–∞–ø—É—â–µ–Ω–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é Nest, –ø–æ—ç—Ç–æ–º—É –º—ã –ø–µ—Ä–µ–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ <code>request()</code> —Å—Å—ã–ª–∫—É –Ω–∞ HTTP-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–∂–∏—Ç –≤ –æ—Å–Ω–æ–≤–µ Nest
(–∫–æ—Ç–æ—Ä—ã–π, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π Express). –û—Ç—Å—é–¥–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è <code>request(app.getHttpServer())</code>.
–í—ã–∑–æ–≤ <code>request()</code> –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–∞–º –æ–±–µ—Ä–Ω—É—Ç—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä, —Ç–µ–ø–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é Nest, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã
–¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ HTTP-–∑–∞–ø—Ä–æ—Å–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ <code>request(...).get('/cats')</code> –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é Nest,
–∫–æ—Ç–æ—Ä—ã–π –∏–¥–µ–Ω—Ç–∏—á–µ–Ω <strong>–∞–∫—Ç—É–∞–ª—å–Ω–æ–º—É</strong> HTTP-–∑–∞–ø—Ä–æ—Å—É —Ç–∏–ø–∞ <code>get '/cats'</code>, –ø–æ—Å—Ç—É–ø–∞—é—â–µ–º—É –ø–æ —Å–µ—Ç–∏.</p> <p>–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é (test-double) —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é <code>CatsService</code>, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∂–µ—Å—Ç–∫–æ
–∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>overrideProvider()</code> –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–∞–∫–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π
—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, Nest –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ö—Ä–∞–Ω–Ω–∏–∫–æ–≤, –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–æ–≤, —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ pipes —Å –ø–æ–º–æ—â—å—é
–º–µ—Ç–æ–¥–æ–≤ <code>overrideGuard()</code>, <code>overrideInterceptor()</code>, <code>overrideFilter()</code> –∏ <code>overridePipe()</code> —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.</p> <p>–ö–∞–∂–¥—ã–π –∏–∑ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å 3 —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç –º–µ—Ç–æ–¥—ã, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ
–¥–ª—è <a href="/guide/fundamentals/custom-providers">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤</a>:</p> <ul><li><code>useClass</code>: –≤—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞–Ω, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
–æ–±—ä–µ–∫—Ç–∞ (–ø—Ä–æ–≤–∞–π–¥–µ—Ä, –æ—Ö—Ä–∞–Ω–Ω–∏–∫ –∏ —Ç.–¥.).</li> <li><code>useValue</code>: –≤—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ —ç–∫–∑–µ–º–ø–ª—è—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –æ–±—ä–µ–∫—Ç.</li> <li><code>useFactory</code>: –≤—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –≤–æ–∑–≤—Ä–∞—â–∞—é—â—É—é —ç–∫–∑–µ–º–ø–ª—è—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –æ–±—ä–µ–∫—Ç.</li></ul> <p>–ö–∞–∂–¥—ã–π –∏–∑ –º–µ—Ç–æ–¥–æ–≤ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä <code>TestingModule</code> –∏, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–∂–µ—Ç –±—ã—Ç—å
—Å–≤—è–∑–∞–Ω —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –≤ <a href="https://en.wikipedia.org/wiki/Fluent_interface" target="_blank" rel="noopener noreferrer">fluent style<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. –í—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>compile()</code>
–≤ –∫–æ–Ω—Ü–µ —Ç–∞–∫–æ–π —Ü–µ–ø–æ—á–∫–∏, —á—Ç–æ–±—ã –∑–∞—Å—Ç–∞–≤–∏—Ç—å Nest –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å.</p> <p>–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –∏–Ω–æ–≥–¥–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ª–æ–≥–≥–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤ (–∫ –ø—Ä–∏–º–µ—Ä—É, –Ω–∞ CI-—Å–µ—Ä–≤–µ—Ä–µ).
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ <code>setLogger()</code> –∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É <code>LoggerService</code>, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å <code>TestModuleBuilder</code>,
–∫–∞–∫ –≤–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–æ–Ω—Å–æ–ª—å –±—É–¥—É—Ç –≤—ã–≤–æ–¥–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –∂—É—Ä–Ω–∞–ª—ã &quot;–æ—à–∏–±–æ–∫&quot;).</p> <p>–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤, –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –≤ —Å–ª–µ–¥—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ:</p> <table><tr><td><code>createNestApplication()</code></td> <td>
      –°–æ–∑–¥–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Nest (—ç–∫–∑–µ–º–ø–ª—è—Ä <code>INestApplication</code>) –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, 
      —á—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã –≤—Ä—É—á–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ <code>init()</code>.
    </td></tr> <tr><td><code>createNestMicroservice()</code></td> <td>
      –°–æ–∑–¥–∞–µ—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å Nest (—ç–∫–∑–µ–º–ø–ª—è—Ä <code>INestMicroservice</code>) –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è.
    </td></tr> <tr><td><code>get()</code></td> <td>
      –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–≤–∫–ª—é—á–∞—è guards, filters –∏ —Ç.–¥.), –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç –∫–ª–∞—Å—Å–∞ <a href="/guide/fundamentals/module-ref">—Å—Å—ã–ª–∫–∏ –Ω–∞ –º–æ–¥—É–ª—å</a>.    
    </td></tr> <tr><td><code>resolve()</code></td> <td>
      –ü–æ–ª—É—á–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä (request –∏–ª–∏ transient) –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–≤–∫–ª—é—á–∞—è guards, filters –∏ —Ç.–¥.), –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç –∫–ª–∞—Å—Å–∞ <a href="/guide/fundamentals/module-ref">—Å—Å—ã–ª–∫–∏ –Ω–∞ –º–æ–¥—É–ª—å</a>. 
    </td></tr> <tr><td><code>select()</code></td> <td>
      –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –ø–æ –≥—Ä–∞—Ñ—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–æ–¥—É–ª—è; –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å–æ —Å—Ç—Ä–æ–≥–∏–º —Ä–µ–∂–∏–º–æ–º (<code>strict: true</code>) –≤ –º–µ—Ç–æ–¥–µ <code>get()</code>).
    </td></tr></table> <blockquote><p>–•—Ä–∞–Ω–∏—Ç–µ —Å–≤–æ–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã e2e –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ <code>test</code>. –§–∞–π–ª—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å —Å—É—Ñ—Ñ–∏–∫—Å <code>.e2e-spec</code>.</p></blockquote> <h2 id="–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-–≥–ª–æ–±–∞–ª—å–Ω–æ-–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö-—Å–µ—Ä–≤–∏—Å–æ–≤"><a href="#–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ-–≥–ª–æ–±–∞–ª—å–Ω–æ-–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö-—Å–µ—Ä–≤–∏—Å–æ–≤" class="header-anchor">#</a> –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤</h2> <p>–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π guard (–∏–ª–∏ pipe, interceptor, –∏–ª–∏ filter), –≤–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –µ—â–µ
–Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤, —á—Ç–æ–±—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∞–∫–æ–π —Å–µ—Ä–≤–∏—Å. –ù–∞–ø–æ–º–Ω–∏–º, —á—Ç–æ –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>providers<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    provide<span class="token operator">:</span> <span class="token constant">APP_GUARD</span><span class="token punctuation">,</span>
    useClass<span class="token operator">:</span> JwtAuthGuard<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>–≠—Ç–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è guard –∫–∞–∫ &quot;–º—É–ª—å—Ç–∏&quot;-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω <code>APP_*</code>. –ß—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω–∏—Ç—å <code>JwtAuthGuard</code> –∑–¥–µ—Å—å,
—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ —ç—Ç–æ–º —Å–ª–æ—Ç–µ:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>providers<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    provide<span class="token operator">:</span> <span class="token constant">APP_GUARD</span><span class="token punctuation">,</span>
    useExisting<span class="token operator">:</span> JwtAuthGuard<span class="token punctuation">,</span>
    <span class="token comment">// ^^^^^^^^ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 'useExisting' –≤–º–µ—Å—Ç–æ 'useClass'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  JwtAuthGuard<span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>–ò–∑–º–µ–Ω–∏—Ç–µ <code>useClass</code> –Ω–∞ <code>useExisting</code>, —á—Ç–æ–±—ã —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã Nest
–∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞–ª –µ–≥–æ –ø–æ–¥ —Ç–æ–∫–µ–Ω–æ–º.</p></blockquote> <p>–¢–µ–ø–µ—Ä—å <code>JwtAuthGuard</code> –≤–∏–¥–µ–Ω Nest –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ <code>TestingModule</code>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> moduleRef <span class="token operator">=</span> <span class="token keyword">await</span> Test<span class="token punctuation">.</span><span class="token function">createTestingModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>AppModule<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">overrideProvider</span><span class="token punctuation">(</span>JwtAuthGuard<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">useClass</span><span class="token punctuation">(</span>MockAuthGuard<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–¢–µ–ø–µ—Ä—å –≤–∞—à–∏ —Ç–µ—Å—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å<code>MockAuthGuard</code> –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.</p> <h2 id="—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤-—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö-–Ω–∞-–∑–∞–ø—Ä–æ—Å"><a href="#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤-—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö-–Ω–∞-–∑–∞–ø—Ä–æ—Å" class="header-anchor">#</a> –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤, —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ –∑–∞–ø—Ä–æ—Å</h2> <p>–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã <a href="/guide/fundamentals/injection-scopes">Request-scoped</a> —Å–æ–∑–¥–∞—é—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—Ö–æ–¥—è—â–µ–≥–æ <strong>–∑–∞–ø—Ä–æ—Å–∞</strong>.
–≠–∫–∑–µ–º–ø–ª—è—Ä —É–¥–∞–ª—è–µ—Ç—Å—è —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞. –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É, –ø–æ—Å–∫–æ–ª—å–∫—É –º—ã –Ω–µ –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å
–¥–æ—Å—Ç—É–ø –∫ –ø–æ–¥–¥–µ—Ä–µ–≤—É –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —Å–æ–∑–¥–∞–Ω–Ω–æ–º—É —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.</p> <p>–ú—ã –∑–Ω–∞–µ–º (–Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Ä–∞–∑–¥–µ–ª–æ–≤ –≤—ã—à–µ), —á—Ç–æ –º–µ—Ç–æ–¥ <code>resolve()</code> –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ
–∫–ª–∞—Å—Å–∞. –¢–∞–∫–∂–µ, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ <a href="/guide/fundamentals/module-ref#%D1%80%D0%B0%D0%B7%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B5-scoped-%D0%BF%D1%80%D0%BE%D0%B2%D0%B0%D0%B8%D0%B4%D0%B5%D1%80%D0%BE%D0%B2">–∑–¥–µ—Å—å</a>, –º—ã –∑–Ω–∞–µ–º,
—á—Ç–æ –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø–æ–¥–¥–µ—Ä–µ–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ DI. –ö–∞–∫ –º—ã
–º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è?</p> <p>–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –∑–∞—Ä–∞–Ω–µ–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –∑–∞—Å—Ç–∞–≤–∏—Ç—å Nest –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç
–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–¥–µ—Ä–µ–≤–∞ –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º—ã —Å–º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ
–¥–ª—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.</p> <p>–ß—Ç–æ–±—ã –¥–æ–±–∏—Ç—å—Å—è —ç—Ç–æ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ <code>jest.spyOn()</code> –¥–ª—è <code>ContextIdFactory</code>:</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">const</span> contextId <span class="token operator">=</span> ContextIdFactory<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jest
  <span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>ContextIdFactory<span class="token punctuation">,</span> <span class="token string">'getByRequest'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> contextId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>contextId</code> –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–¥–Ω–æ–º—É —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø–æ–¥–¥–µ—Ä–µ–≤—É DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏ –ª—é–±–æ–º
–ø–æ—Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>catsService <span class="token operator">=</span> <span class="token keyword">await</span> moduleRef<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>CatsService<span class="token punctuation">,</span> contextId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/guide/fundamentals/platform-agnosticism.html" class="prev">
        –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
      </a></span> <span class="next"><a href="/guide/techniques/database.html">
        –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1bd63846.js" defer></script><script src="/assets/js/2.5070ee21.js" defer></script><script src="/assets/js/25.c3f9362d.js" defer></script><script src="/assets/js/6.167fb38f.js" defer></script>
  </body>
</html>
